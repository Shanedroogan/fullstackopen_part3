(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(14),u=t.n(c),o=(t(20),t(4)),l=t(2),i=function(e){return r.a.createElement("div",null,r.a.createElement("p",null,"filter: ",r.a.createElement("input",{value:e.filter,onChange:e.onChange})))},m=function(e){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:e.onSubmit},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:e.newName,onChange:e.handleNameChange})),r.a.createElement("div",null,"phone number: ",r.a.createElement("input",{value:e.newPhone,onChange:e.handlePhoneChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},s=function(e){var n=e.name,t=e.num,a=e.deletePerson;return r.a.createElement("div",null,r.a.createElement("p",null,n," ",t),r.a.createElement("button",{onClick:a},"delete"))},f=function(e){var n=e.personsToShow,t=e.deletePerson;return r.a.createElement("div",null,n.map((function(e){return r.a.createElement(s,{key:e.id,name:e.name,num:e.number,deletePerson:function(){return t(e)}})})))},d=function(e){return null===e.message?null:r.a.createElement("div",{className:e.messageClass},e.message)},h=t(3),b=t.n(h),p="/api/persons",v=function(){return b.a.get(p).then((function(e){return e.data}))},E=function(e){return b.a.post(p,e).then((function(e){return e.data}))},g=function(e,n){return b.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},w=function(e){return b.a.delete("".concat(p,"/").concat(e))},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),s=Object(l.a)(u,2),h=s[0],b=s[1],p=Object(a.useState)(""),j=Object(l.a)(p,2),O=j[0],C=j[1],S=Object(a.useState)(""),y=Object(l.a)(S,2),P=y[0],k=y[1],N=Object(a.useState)(null),D=Object(l.a)(N,2),T=D[0],I=D[1],J=Object(a.useState)(""),L=Object(l.a)(J,2),x=L[0],B=L[1];Object(a.useEffect)((function(){v().then((function(e){c(e)}))}),[]);var q=function(e,n){B(n),I(e),setTimeout((function(){I(null)}),5e3)},z=t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())}));return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(d,{message:T,messageClass:x}),r.a.createElement(i,{value:P,onChange:function(e){return k(e.target.value)}}),r.a.createElement(m,{onSubmit:function(e){e.preventDefault();var n={name:h,number:O};if(t.every((function(e){return e.name!==h})))E(n).then((function(e){c(t.concat(e)),q("Successfully added ".concat(n.name,"."),"success"),b(""),C("")})).catch((function(e){q(e.response.data.error,"error")}));else if(window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))){var a=t.find((function(e){return e.name===n.name})),r=Object(o.a)(Object(o.a)({},a),{},{number:n.number});g(a.id,r).then((function(e){c(t.map((function(t){return t.name!==n.name?t:e}))),q("Successfully changed ".concat(n.name,"'s phone number."),"success"),b(""),C("")})).catch((function(e){q("Information of ".concat(n.name," was already removed from the server"),"error"),c(t.filter((function(e){return e.name!==n.name})))}))}else console.log("update phone number cancelled")},newName:h,newPhone:O,handleNameChange:function(e){return b(e.target.value)},handlePhoneChange:function(e){return C(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(f,{personsToShow:z,deletePerson:function(e){var n=window.confirm("Delete ".concat(e.name,"?")),a=e.id;n?w(a).then((function(n){c(t.filter((function(e){return e.id!==a}))),q("Successfully deleted ".concat(e.name," from the server."),"success")})):q("Deletion aborted.","failure")}}))};u.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.8fb0b593.chunk.js.map